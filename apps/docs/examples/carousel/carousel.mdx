import { Tabs } from 'nextra/components'

import { Carousel } from './carousel'

## Carousel

<Tabs items={['preview', 'component', 'css']}>
  <Tabs.Tab>
    <Carousel />
  </Tabs.Tab>

  <Tabs.Tab>
```tsx
import clsx from 'clsx'
import { useVirtualGrid } from 'virtual-grid'

import classes from './carousel.module.css'
import { useMemo } from 'react'

const data = Array(1000).fill(0).map((_, i) => i + 1)

export function Carousel() {
  const {
    items,
    styles,
    gridRef,
    scrollRef,
    page,
    pages,
    onScrollTo
  } = useVirtualGrid({
    data,
    horizontal: true,
    gap: 16,
    padding: [0, 0, 0, 0],
  })

  const navigation = useMemo(() => {
    if (!page || !pages) return []
    return getPaginationArray(page, pages, 2)
  }, [page, pages])

  return (
    <div className={classes.container}>
      <div className={classes.carousel}>
        <div className={classes.scroll} ref={scrollRef}>
          <div className={classes.grid} ref={gridRef} style={styles}>
            {items?.map((item) => (
              <div key={item} className={classes.card}>
                {item}
              </div>
            ))}
          </div>
        </div>

        <div className={classes.controls}>
          <div className={classes.navigation}>
            <div className={classes.fixed}>
              <button
                className={clsx([classes.nav, 1 === page && classes.disabled])}
                onClick={() => onScrollTo(1)}>
                first
              </button>
              <div
                className={clsx([classes.nav, 1 === page && classes.disabled])}
                onClick={() => onScrollTo(page - 1)}>
                prev
              </div>
            </div>
            {navigation.map((item) => (
              <button
                key={item}
                className={clsx([classes.nav, item === page && classes.active])}
                onClick={() => onScrollTo(item)}>
                {item}
              </button>
            ))}
            <div className={classes.fixed}>
              <button
                className={clsx([classes.nav, pages === page && classes.disabled])}
                onClick={() => onScrollTo(page + 1)}>
                next
              </button>
              <button
                className={clsx([classes.nav, pages === page && classes.disabled])}
                onClick={() => onScrollTo(pages)}>
                last
              </button>
            </div>
          </div>
          <h6>{page} of {pages}</h6>
        </div>
      </div>
    </div>
  )
}

function getPaginationArray(currentPage: number, totalPages: number, pad: number) {
  const amount = pad * 2 + 1

  // left pad
  if (currentPage <= pad) {
    return Array.from({ length: amount }, (_, i) => i + 1)
  }

  // right pad
  if (currentPage >= totalPages - pad) {
    const start = totalPages - (amount - 1)
    return Array.from({ length: amount }, (_, i) => start + i)
  }

  const start = currentPage - pad
  return Array.from({ length: amount }, (_, i) => start + i)
}
```
  </Tabs.Tab>

  <Tabs.Tab>
```css
.container {
  background: #000;
  border-radius: 6px;
  border: 1px solid #3f3f3f;
}

.carousel {
  margin: 32px;
  overflow: hidden;
}

.scroll {
  overflow-y: hidden;
  overflow-x: auto;
  scrollbar-width: none;
  scroll-snap-type: x proximity;
  scroll-snap-align: center;
  scroll-behavior: smooth;
}

.scroll::-webkit-scrollbar {
  display: none;
}

.grid {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 766px;
  grid-template-rows: repeat(1, minmax(320px, 1fr));
  align-content: start;
  gap: 16px;
  padding: 0;
}

.card {
  background: #191919;
  border-radius: 6px;
  font-size: 14px;
  height: 100%;
  white-space: nowrap;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  animation: fadeIn 0.5s forwards;
  scroll-snap-align: start;
  scroll-snap-stop: always;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

.controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
  margin-top: 16px;
}

.navigation {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 16px;
}

.nav {
  cursor: pointer;
  color: #666;
}

.nav.active {
  color: #fff;
}

.nav.disabled {
  color: #222;
}

.fixed {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 16px;
  gap: 16px;
}
```
  </Tabs.Tab>
</Tabs>

> Note: Scroll snap and animations are not part of the hook. You can use css scroll-snap-align and scroll-behavior to achieve this effect.
